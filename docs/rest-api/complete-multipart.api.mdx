---
id: complete-multipart
title: "Complete multipart upload"
description: "Completes the multipart upload in the external store, and copies the"
sidebar_label: "Complete multipart upload"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/rest-api/discourse-api-documentation
custom_edit_url: null
hide_send_button: true
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import SecuritySchemes from "@theme/ApiExplorer/SecuritySchemes";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import Markdown from "@theme/Markdown";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Complete multipart upload</h1>

<MethodEndpoint method={"post"} path={"/uploads/complete-multipart.json"}></MethodEndpoint>



Completes the multipart upload in the external store, and copies the
file from its temporary location to its final location in the store.
All of the parts must have been uploaded to the external storage provider.
An Upload record will be completed in most cases once the file is copied
to its final location.

You must have the correct permissions and CORS settings configured in your
external provider. We support AWS S3 as the default. See:

https://meta.discourse.org/t/-/210469#s3-multipart-direct-uploads-4.

An external file store must be set up and `enable_direct_s3_uploads` must
be set to true for this endpoint to function.



## Request

<MimeTabs className={"openapi-tabs__mime"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"unique_identifier"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"66e86218-80d9-4bda-b4d5-2b6def968705","description":"The unique identifier returned in the original /create-multipart request."}}></SchemaItem><SchemaItem collapsible={false} name={"parts"} required={true} schemaName={"array"} qualifierMessage={undefined} schema={{"type":"array","example":[{"part_number":1,"etag":"0c376dcfcc2606f4335bbc732de93344"},{"part_number":2,"etag":"09ert8cfcc2606f4335bbc732de91122"}],"description":"All of the part numbers and their corresponding ETags that have been uploaded must be provided."}}></SchemaItem></ul></details></TabItem></MimeTabs><div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>

external upload initialized

</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"id"} required={true} schemaName={"integer"} qualifierMessage={undefined} schema={{"type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"url"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"original_filename"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"filesize"} required={true} schemaName={"integer"} qualifierMessage={undefined} schema={{"type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"width"} required={true} schemaName={"integer"} qualifierMessage={undefined} schema={{"type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"height"} required={true} schemaName={"integer"} qualifierMessage={undefined} schema={{"type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"thumbnail_width"} required={true} schemaName={"integer"} qualifierMessage={undefined} schema={{"type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"thumbnail_height"} required={true} schemaName={"integer"} qualifierMessage={undefined} schema={{"type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"extension"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"short_url"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"short_path"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"retain_hours"} required={true} schemaName={["string","null"]} qualifierMessage={undefined} schema={{"type":["string","null"]}}></SchemaItem><SchemaItem collapsible={false} name={"human_filesize"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"dominant_color"} required={false} schemaName={["string","null"]} qualifierMessage={undefined} schema={{"type":["string","null"]}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"id\": 0,\n  \"url\": \"string\",\n  \"original_filename\": \"string\",\n  \"filesize\": 0,\n  \"width\": 0,\n  \"height\": 0,\n  \"thumbnail_width\": 0,\n  \"thumbnail_height\": 0,\n  \"extension\": \"string\",\n  \"short_url\": \"string\",\n  \"short_path\": \"string\",\n  \"human_filesize\": \"string\"\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      